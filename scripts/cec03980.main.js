var Config={api:"/api/"};(function(){"use strict";window.Dv={Models:{},Collections:{},Views:{},Routers:{},Visits:window.sessionStorage,Lang:"pt",init:function(){return Dv.i18n={navbar:{book:{en:"The Book",pt:"O Livro"},about:{en:"About",pt:"Sobre"}}},Dv.Router=new Dv.Routers.Index}},$(function(){return Dv.init()})}).call(this),this.JST=this.JST||{},this.JST["app/scripts/templates/about.ejs"]=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+='<div class="post">\n  <div class="post-content">\n    '+(null==(__t=this.model.contents())?"":__t)+'\n    <p>\n      <img class="img-responsive" height="173" src="images/apoios@2x.png" width="372" alt="apoios">\n    </p>\n  </div>\n</div>\n';return __p},this.JST["app/scripts/templates/book.ejs"]=function(obj){obj||(obj={});var __t,__p="";_.escape,Array.prototype.join;with(obj)this.collection.each(function(a){__p+='\n  <div class="post">\n    <div class="post-header">\n      ',a.get("title")&&(__p+="\n        <h3>"+(null==(__t=a.get("title")[Dv.Lang])?"":__t)+"</h3>\n      "),__p+="\n      <h6>"+(null==(__t=a.get("date"))?"":__t)+'</h6>\n    </div>\n    <div class="post-content">\n      ',__p+="video"===a.get("type")?'\n        <div class="video-comment">\n          <video controls autoplay poster="'+(null==(__t=a.get("thumbnail_url"))?"":__t)+'" preload="auto" width="540">\n            <source src="'+(null==(__t=a.get("video_url"))?"":__t)+'" type="video/mp4">\n          </video>\n        </div>\n      ':"\n        "+(null==(__t=a.get("body")[Dv.Lang])?"":__t)+"\n      ",__p+="\n      <p>—</p>\n    </div>\n  </div>\n"}),__p+="\n";return __p},this.JST["app/scripts/templates/comment.ejs"]=function(obj){obj||(obj={});var __t,__p="";_.escape,Array.prototype.join;with(obj){switch(__p+='<div class="comment-close">\n  <span class="close"></span>\n</div>\n<div class="container-fluid">\n  <h4>\n    ',__p+="en"==Dv.Lang?"\n      Marginalia by "+(null==(__t=this.model.get("author").en||"Margin&aacute;lia !")?"":__t)+"\n    ":"\n      Margin&aacute;lia por "+(null==(__t=this.model.get("author").pt||"Margin&aacute;lia !")?"":__t)+"\n    ",__p+="\n  </h4>\n  ",this.model.get("type")){case"text":__p+='\n      <div class="text-comment">\n        '+(null==(__t=this.model.get("body")[Dv.Lang])?"":__t)+"\n      </div>\n    ";break;case"photo":__p+='\n      <div class="photo-comment">\n        ',__p+="M"===this.model.get("id")?'\n          <a href="'+(null==(__t=this.model.get("photo_url"))?"":__t)+'" target="_blank">\n            <img width="540" src="'+(null==(__t=this.model.get("photo_url"))?"":__t)+'" alt="image">\n          </a>\n        ':'\n          <img width="540" src="'+(null==(__t=this.model.get("photo_url"))?"":__t)+'" alt="image">\n        ',__p+="\n      </div>\n    ";break;case"audio":__p+='\n      <div class="audio-comment">\n        <audio controls autoplay preload="auto" width="540">\n          <source src="'+(null==(__t=this.model.get("audio_url"))?"":__t)+'" type="audio/mp3">\n        </audio>\n        <div style="margin-top: 15px">\n          '+(null==(__t=this.model.get("caption")[Dv.Lang])?"":__t)+"\n        </div>\n      </div>\n    ";break;case"video":__p+='\n      <div class="video-comment">\n        ',"B"===this.model.get("id")&&(__p+="\n          "+(null==(__t=this.model.get("caption")[Dv.Lang])?"":__t)+"\n        "),__p+='\n        <video controls autoplay poster="'+(null==(__t=this.model.get("thumbnail_url"))?"":__t)+'" preload="auto" width="540">\n          <source src="'+(null==(__t=this.model.get("video_url"))?"":__t)+'" type="video/mp4">\n        </video>\n      </div>\n    ';break;default:__p+='\n      <div class="default-comment">\n        '+(null==(__t=this.model.get("body"))?"":__t)+"\n      </div>\n  "}__p+="\n</div>\n"}return __p},this.JST["app/scripts/templates/gallery.ejs"]=function(obj){obj||(obj={});var __t,__p="";_.escape,Array.prototype.join;with(obj)__p+='<div class="gallery-ab hidden-xs">\n  <span class="ab">ab.</span>\n  <ul class="list-unstyled">\n    <li>&epsilon; : pertence a</li>\n    <li>&hArr; : equivalente a</li>\n    <li>&rArr; : por consequência</li>\n    <li>&rArr; &sub; : por consequência inclui</li>\n    <li>&perp; : absurdo</li>\n    <li>&forall; : para tudo, qualquer que seja</li>\n    <li>&exist; : existe (pelo menos um) </li>\n    <li>&sub; : inclui</li>\n    <li>&cap; : interseção</li>\n    <li>&infin; : infinito</li>\n  </ul>\n</div>\n<div class="gallery-close">\n  <a class="close" href="#/'+(null==(__t=Dv.Lang)?"":__t)+"/mesa/"+(null==(__t=this.table.get("id"))?"":__t)+'" title="Close"></a>\n</div>\n<div class="drawing-container d-view-'+(null==(__t=this.model.get("id"))?"":__t)+'"></div>\n<div class="drawing-title">\n  '+(null==(__t=_.unescape(markdown.toHTML(this.model.get("title"))))?"":__t)+'\n</div>\n<nav class="gallery-nav">\n  <ul class="pager">\n    <li class="previous">\n      ',this.get("prev")&&(__p+='\n        <a href="#/'+(null==(__t=Dv.Lang)?"":__t)+"/mesa/"+(null==(__t=this.table.get("id"))?"":__t)+"/desenho/"+(null==(__t=this.get("prev").get("id"))?"":__t)+'">\n          <span class="pull-left">&larr;&nbsp;</span>\n          <span>'+(null==(__t=_.unescape(markdown.toHTML(this.get("prev").get("slug"))))?"":__t)+"</span>\n        </a>\n      "),__p+='\n    </li>\n    <li class="next">\n      ',this.get("next")&&(__p+='\n        <a href="#/'+(null==(__t=Dv.Lang)?"":__t)+"/mesa/"+(null==(__t=this.table.get("id"))?"":__t)+"/desenho/"+(null==(__t=this.get("next").get("id"))?"":__t)+'">\n          <span class="pull-right">&nbsp;&rarr;</span>\n          <span>'+(null==(__t=_.unescape(markdown.toHTML(this.get("next").get("slug"))))?"":__t)+"</span>\n        </a>\n      "),__p+="\n    </li>\n  </ul>\n</nav>\n";return __p},this.JST["app/scripts/templates/index.ejs"]=function(obj){obj||(obj={});var __t,__p="";_.escape,Array.prototype.join;with(obj)this.groups.forEach(function(a){__p+='\n  <div class="t-group">\n    <ol>\n      ',a.forEach(function(a,b){__p+='\n        <li class="'+(null==(__t=a.get("orientation")[0])?"":__t)+"-item t"+(null==(__t=a.id)?"":__t)+'">\n          <a data-id="'+(null==(__t=a.id)?"":__t)+'" href="#/'+(null==(__t=Dv.Lang)?"":__t)+"/mesa/"+(null==(__t=a.id)?"":__t)+'" class="'+(null==(__t=a.hasVisited())?"":__t)+'">\n            Mesa '+(null==(__t=a.id)?"":__t)+"\n          </a>\n        </li>\n      "}),__p+="\n    </ol>\n  </div>\n"}),__p+="\n";return __p},this.JST["app/scripts/templates/navbar.ejs"]=function(obj){obj||(obj={});var __t,__p="";_.escape,Array.prototype.join;with(obj)__p+='<div class="container-fluid">\n  <ul class="nav navbar-nav">\n      <li><a class="page-title" href="#/'+(null==(__t=Dv.Lang)?"":__t)+'">Duplo Vê</a></li>\n  </ul>\n  <ul class="nav navbar-nav navbar-right">\n      <li><a href="#/'+(null==(__t=Dv.Lang)?"":__t)+'/livro">'+(null==(__t=Dv.i18n.navbar.book[Dv.Lang])?"":__t)+'</a></li>\n      <li><a href="#/'+(null==(__t=Dv.Lang)?"":__t)+'/sobre">'+(null==(__t=Dv.i18n.navbar.about[Dv.Lang])?"":__t)+"</a></li>\n      <li>\n        ",__p+="en"==Dv.Lang?'\n          <a href="#/pt'+(null==(__t=Backbone.history.fragment.split("en")[1])?"":__t)+'">PT</a>\n        ':"pt"==Dv.Lang?'\n          <a href="#/en'+(null==(__t=Backbone.history.fragment.split("pt")[1])?"":__t)+'">EN</a>\n        ':'\n          <a href="#/pt">PT</a>\n        ',__p+="\n      </li>\n  </ul>\n</div>\n";return __p},this.JST["app/scripts/templates/table.ejs"]=function(obj){obj||(obj={});var __t,__p="";_.escape,Array.prototype.join;with(obj)this.model.get("comment").author_en&&this.model.get("comment").author_pt&&(__p+='\n  <div class="table-comment">\n    <a href="#/'+(null==(__t=Dv.Lang)?"":__t)+"/mesa/"+(null==(__t=this.model.get("id"))?"":__t)+'/comentario">\n      <span class="on-mouse-out">\n        ',__p+="en"==Dv.Lang?" Marginalia ":" Margin&aacute;lia ",__p+='\n      </span>\n      <span class="on-mouse-over">\n        ',__p+="en"==Dv.Lang?"\n          by "+(null==(__t=this.model.get("comment").author_en||"Margin&aacute;lia !")?"":__t)+"\n        ":"\n          por "+(null==(__t=this.model.get("comment").author_pt||"Margin&aacute;lia !")?"":__t)+"\n        ",__p+="\n      </span>\n    </a>\n  </div>\n"),__p+='\n<div class="table-content">\n  <ul>\n    ',this.model.get("drawings").forEach(function(a){__p+='\n      <li class="d-'+(null==(__t=a.id)?"":__t)+'">\n        <a class="d-preview-'+(null==(__t=a.id)?"":__t)+'" href="#/'+(null==(__t=Dv.Lang)?"":__t)+"/mesa/"+(null==(__t=this.model.get("id"))?"":__t)+"/desenho/"+(null==(__t=a.id)?"":__t)+'">\n          Desenho '+(null==(__t=a.id)?"":__t)+"\n        </a>\n      </li>\n    "},this),__p+="\n  </ul>\n</div>\n",this.get("prev")&&(__p+='\n  <a class="prev table-navigation" href="#/'+(null==(__t=Dv.Lang)?"":__t)+"/mesa/"+(null==(__t=this.get("prev"))?"":__t)+'">&larr;</a>\n'),__p+="\n",this.get("next")&&(__p+='\n  <a class="next table-navigation" href="#/'+(null==(__t=Dv.Lang)?"":__t)+"/mesa/"+(null==(__t=this.get("next"))?"":__t)+'">&rarr;</a>\n'),__p+="\n";return __p},this.JST["app/scripts/templates/text.ejs"]=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+='<div class="post">\n  <div class="post-content">\n    '+(null==(__t=this.model.contents())?"":__t)+"\n  </div>\n</div>\n";return __p},function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};Dv.Views.Navbar=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.template=JST["app/scripts/templates/navbar.ejs"],c.prototype.initialize=function(){return this.render()},c.prototype.render=function(){return $("#navbar").html(this.template())},c.prototype.close=function(){return this.remove(),this.unbind()},c}(Backbone.View)}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};Dv.Routers.Index=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.routes={"(:lang)(/)":"index",":lang/sobre(/)":"about",":lang/livro(/)":"book",":lang/mesa/:id(/)":"openTable",":lang/mesa/:id/comentario(/)":"openComment",":lang/mesa/:tableId/desenho/:id(/)":"openDrawing",":lang/duplo-ve-por-catarina-alfaro":"text",":lang/o-mundo-e-idiota":"idiot"},c.prototype.initialize=function(){return this.on("route",this.bodyClass),this.contents=new Dv.Collections.Contents,this.tables=new Dv.Collections.Tables,this.comments=new Dv.Collections.Comments,this.comments.fetch().success(function(a){return function(){return a.contents.fetch().success(function(){return a.tables.fetch().success(function(){return Backbone.history.start()})})}}(this))},c.prototype.index=function(a){var b;return Dv.Lang=a||"pt",b=new Dv.Views.Index({collection:this.tables}),this.render(b),window.setTimeout(function(){return b.calculateRatio()},0)},c.prototype.about=function(a){return Dv.Lang=a,this.render(new Dv.Views.About({model:this.contents.get("about")}))},c.prototype.text=function(a){var b;return Dv.Lang=a,b=this.contents.get("duplo-ve-por-catarina-alfaro"),this.render(new Dv.Views.Text({model:b}))},c.prototype.idiot=function(a){var b;return Dv.Lang=a,b=this.contents.get("idiot"),this.render(new Dv.Views.Text({model:b}))},c.prototype.book=function(a){var b;return Dv.Lang=a,b=new Dv.Collections.Events,b.fetch().success(function(a){return function(){return a.render(new Dv.Views.Book({collection:b}))}}(this))},c.prototype.openTable=function(a,b){var c,d;return Dv.Lang=a,c=this.tables.get(b),d=new Dv.Views.Table({model:c}),this.render(d),d.calculateRatio(),Dv.Visits.setItem("table-"+b,!0)},c.prototype.openComment=function(a,b){var c;return Dv.Lang=a,this.openTable(a,b),c=new Dv.Views.Comment({model:this.comments.get(b)}),this.renderComment(c)},c.prototype.openDrawing=function(a,b,c){var d;return Dv.Lang=a,this.openTable(a,b),d=this.tables.get(b),this.galleryView?this.galleryView.update(c):(this.galleryView=new Dv.Views.Gallery({current:c,collection:d.get("drawings"),table:d}),$("body").append(this.galleryView.render().el))},c.prototype.render=function(a){return Dv.Navbar&&Dv.Navbar.close(),Dv.Navbar=new Dv.Views.Navbar,this.commentView&&this.commentView.close(),this.view&&this.view.close(),this.view=a,$("#content").html(this.view.render().el)},c.prototype.renderComment=function(a){return Dv.Navbar&&Dv.Navbar.close(),Dv.Navbar=new Dv.Views.Navbar,this.commentView&&this.commentView.close(),this.commentView=a,$("#content").append(this.commentView.render().el)},c.prototype.bodyClass=function(a){return $("body").attr("class",a)},c}(Backbone.Router)}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};Dv.Models.Table=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.initialize=function(){return this.set("comment.model",new Dv.Models.Comment({id:this.id}))},c.prototype.hasComment=function(){var a;return a=this.get("comment"),a.author_en&&a.author_pt?"has-comment":void 0},c.prototype.hasVisited=function(){return Dv.Visits.getItem("table-"+this.id)?"has-visited":void 0},c.prototype.parse=function(a){return a.drawings=new Dv.Collections.Drawings(a.drawings),a},c}(Backbone.Model)}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};Dv.Collections.Tables=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.model=Dv.Models.Table,c.prototype.url="data/tables.json",c}(Backbone.Collection)}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};Dv.Models.Event=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.parse=function(a){return a.date=moment(a.date.split(" ")[0]).format("D [de] MMMM, YYYY"),a},c}(Backbone.Model)}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};Dv.Collections.Events=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.model=Dv.Models.Event,c.prototype.url="data/events.json",c}(Backbone.Collection)}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};Dv.Views.Index=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.template=JST["app/scripts/templates/index.ejs"],c.prototype.className="t-container",c.prototype.events={"mouseover a":"showPreview","mouseout a":"hidePreview"},c.prototype.initialize=function(){return this.groups=[this.collection.models.slice(0,9),this.collection.models.slice(9,18)]},c.prototype.showPreview=function(a){return this.pid=$(a.currentTarget).data("id"),$("#content").addClass("t-view-"+this.pid)},c.prototype.hidePreview=function(){return $("#content").removeClass("t-view-"+this.pid)},c.prototype.render=function(){return this.$el.html(this.template()),$(window).on("resize",function(a){return function(){return a.calculateRatio()}}(this)),this},c.prototype.calculateRatio=function(){var a,b,c,d;return this.$el.find(".t-group ol li").css("opacity",1),d=.4375,b=1/d,c=$("#content").width(),a=$("#content").height(),a>c*d?this.$el.css({width:"100%",height:c*d+"px","margin-top":420>=c?0:(a-c*d)/2+"px"}):this.$el.css({height:"100%",width:a*b+"px","margin-top":0})},c.prototype.close=function(){return this.hidePreview(),$(window).off("resize"),this.remove(),this.unbind()},c}(Backbone.View)}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};Dv.Views.About=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.template=JST["app/scripts/templates/about.ejs"],c.prototype.className="feed",c.prototype.initialize=function(){return $(".navbar-right li:last-child").addClass("active"),window.scrollTo(0,0)},c.prototype.render=function(){return this.$el.html(this.template(this.model.toJSON())),this},c.prototype.close=function(){return $(".navbar-right li:last-child").removeClass("active"),this.remove(),this.unbind()},c}(Backbone.View)}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};Dv.Views.Book=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.template=JST["app/scripts/templates/book.ejs"],c.prototype.className="feed",c.prototype.initialize=function(){return $("body").addClass("book"),$(".navbar-right li:first-child").addClass("active"),window.scrollTo(0,0)},c.prototype.render=function(){return this.$el.html(this.template()),this},c.prototype.close=function(){return $("body").removeClass("book"),$(".navbar-right li:first-child").removeClass("active"),this.remove(),this.unbind()},c}(Backbone.View)}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};Dv.Models.Comment=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c}(Backbone.Model)}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};Dv.Collections.Comments=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.model=Dv.Models.Comment,c.prototype.url="data/comments.json",c}(Backbone.Collection)}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};Dv.Views.Table=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.template=JST["app/scripts/templates/table.ejs"],c.prototype.className="table-view",c.prototype.initialize=function(){return $("#content").removeClass("t-view-"+this.model.get("id"))},c.prototype.render=function(){return this.$el.html(this.template(this.model.toJSON())),$(window).on("resize",function(a){return function(){return a.calculateRatio()}}(this)),this},c.prototype.get=function(a){var b;return b=this.model.collection.indexOf(this.model),"next"===a&&(b+=1),"prev"===a&&(b-=1),b===this.model.collection.length&&(b=0),-1>=b&&(b=this.model.collection.length-1),this.model.collection.at(b).get("id")},c.prototype.key=function(a){var b,c,d;return d=a.data,37===a.which&&(b="prev"),39===a.which&&(b="next"),c=d.get(b),Dv.Router.navigate("#/"+Dv.Lang+"/mesa/"+c,{trigger:!0})},c.prototype.calculateRatio=function(){var a,b,c,d;return d=.73,b=1/d,c=$("#content").width(),a=$("#content").height(),a>c*d?$(".table-content").css({width:"100%",height:c*d+"px","margin-top":(a-c*d)/2+"px"}):$(".table-content").css({height:"100%",width:a*b+"px","margin-top":0})},c.prototype.close=function(){return $(window).off("resize"),this.remove(),this.unbind()},c}(Backbone.View)}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};Dv.Views.Comment=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.template=JST["app/scripts/templates/comment.ejs"],c.prototype.className="comment",c.prototype.events={"click .close":"close"},c.prototype.initialize=function(){return $(".table-comment").css("opacity",0)},c.prototype.render=function(){return this.$el.html(this.template(this.model.toJSON())),this},c.prototype.close=function(){return"video"===this.model.get("type")&&this.$el.find("video")[0].pause(),$(".table-comment").css("opacity",1),this.remove(),this.unbind(),delete Dv.Router.commentView,Dv.Router.navigate("#/"+Dv.Lang+"/mesa/"+this.model.get("id"))},c}(Backbone.View)}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};Dv.Views.Gallery=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.template=JST["app/scripts/templates/gallery.ejs"],c.prototype.id="gallery",c.prototype.events={"click .close":"close"},c.prototype.initialize=function(a){return $(document).keydown(this,this.key),this.table=a.table,this.model=this.collection.get(a.current)},c.prototype.get=function(a){var b;return b=this.collection.indexOf(this.model),"next"===a&&(b+=1),"prev"===a&&(b-=1),b===this.collection.length&&(b=0),-1>=b&&(b=this.collection.length-1),this.collection.at(b)},c.prototype.update=function(a){return this.model=this.collection.get(a),this.render()},c.prototype.key=function(a){var b,c,d,e;return e=a.data,27===a.which&&e.close(),d=e.table.id,37===a.which&&(b="prev"),39===a.which&&(b="next"),c=e.get(b).get("id"),Dv.Router.navigate("#/"+Dv.Lang+"/mesa/"+d+"/desenho/"+c,{trigger:!0})},c.prototype.render=function(){return this.$el.html(this.template()),this},c.prototype.close=function(){return $(document).off("keydown"),delete Dv.Router.galleryView,this.remove(),this.unbind()},c}(Backbone.View)}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};Dv.Models.Drawing=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c}(Backbone.Model)}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};Dv.Collections.Drawings=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.model=Dv.Models.Drawing,c}(Backbone.Collection)}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};Dv.Views.Text=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.template=JST["app/scripts/templates/text.ejs"],c.prototype.className="feed",c.prototype.render=function(){return this.$el.html(this.template(this.model.toJSON())),window.scrollTo(0,0),this},c.prototype.close=function(){return this.remove(),this.unbind()},c}(Backbone.View)}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};Dv.Models.Content=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.contents=function(){return this.get("contents")[Dv.Lang]},c}(Backbone.Model)}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};Dv.Collections.Contents=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.model=Dv.Models.Content,c.prototype.url="data/contents.json",c}(Backbone.Collection)}.call(this);